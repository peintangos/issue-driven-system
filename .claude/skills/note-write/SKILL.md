---
name: note-write
description: "note記事の壁打ち・執筆支援。テーマのアイデア出し → 構成案 → 本文執筆を対話的に進める。"
argument-hint: "[テーマやキーワードをラフに記述（省略可）]"
allowed-tools: WebSearch, AskUserQuestion, Write, Bash, Read, Glob
---

ユーザーと壁打ちしながら、note（日本のブログプラットフォーム）向けのテック・開発系記事を一緒に作り上げてください。

以下の3ステップで進めます。**各ステップでユーザーの承認を得てから次に進むこと。勝手にステップを飛ばさないこと。**

---

## Step 1: アイデア出し

### `$ARGUMENTS` がある場合
- そのテーマ・キーワードをベースに深掘りする
- WebSearchで関連トピック・トレンド・競合記事を軽く調査する
- ターゲット読者と伝えたいメッセージを整理する

### `$ARGUMENTS` がない場合
- ユーザーに「どんな分野に興味がありますか？」「最近取り組んだことは？」と質問する
- 回答からテーマの方向性を引き出す

### 出力
以下の形式で3つ程度のテーマ案を提示し、ユーザーに選んでもらう：

```
📝 テーマ案:

1. **[タイトル案]**
   想定読者: [誰向けか]
   切り口: [どんな角度で書くか]
   差別化ポイント: [既存記事との違い]

2. **[タイトル案]**
   ...

3. **[タイトル案]**
   ...

どれが良いですか？ アレンジや別のアイデアも歓迎です。
```

**→ ユーザーの選択・フィードバックを待つ**

---

## Step 2: 構成案の作成

選ばれたテーマで記事の構成案を作成する。

### 構成のルール
- H2/H3の見出し構成で全体の骨組みを作る
- 各セクションに要点を箇条書きで添える
- noteで読まれやすい2000〜4000字を目安にボリューム感を設計する
- テック記事のベストプラクティスを反映する：
  - 結論ファースト（冒頭で「この記事で分かること」を明示）
  - 具体例・コード例を含めるセクションを明示
  - 読者が実際にアクションを取れるまとめ

### 出力
以下の形式で構成案を提示する：

```
📋 構成案: [記事タイトル]

■ リード文（〜200字）
  - この記事で分かること / 読むメリット

■ H2: [見出し1]
  ├ H3: [小見出し]
  │  - [要点]
  │  - [要点]
  └ H3: [小見出し]
     - [要点]

■ H2: [見出し2]
  - [要点]
  - [コード例を入れる予定]

■ H2: まとめ
  - 要点の振り返り
  - 次のアクション

想定文字数: 約X,XXX字

修正したい点はありますか？
```

**→ ユーザーの承認・フィードバックを待つ**

---

## Step 3: 本文執筆

承認された構成に沿って本文を執筆する。

### 執筆ルール
- **文体**: ですます調。フレンドリーだが信頼感のあるトーン
- **改行**: noteでの読みやすさを重視。1文ごと or 意味の区切りで改行
- **段落**: 3〜4文で1段落。長い段落は避ける
- **コード例**: 実際に動くコードを書く。コメント付きで分かりやすく
- **具体例**: 抽象的な説明の後には必ず具体例を添える
- **文字数**: 2000〜4000字（noteで最も読まれやすい長さ）
- **noteの慣習**: タイトル行は `#` を使わない（noteのタイトル欄に入れるため）

### 執筆の流れ
1. 構成に沿って全文を書き上げる
2. ユーザーに全文を提示して確認を求める
3. フィードバックがあれば修正する
4. 承認されたら最終版をファイルに保存する

### ファイル保存
最終版は以下のパスに保存する：
- パス: `/workspace/notes/YYYY-MM-DD_<slug>.md`
- `YYYY-MM-DD`: 当日の日付
- `<slug>`: 記事テーマを表す短い英語スラッグ（例: `ai-dev-getting-started`）

ファイルのフォーマット:
```markdown
---
title: "[記事タイトル]"
date: YYYY-MM-DD
status: draft
tags: [tag1, tag2]
---

[本文]
```

保存後、ファイルパスを表示する。

---

## 全体ルール

- ユーザーの言語に合わせる（基本は日本語）
- 各ステップの途中でユーザーが方向転換したら柔軟に対応する
- ユーザーが「ここを詳しく」「ここは短く」と言ったら即座に調整する
- 無理に3ステップ全部を踏む必要はない。ユーザーが「構成はもうあるから本文だけ」と言えばStep 3から始める
- WebSearchは必要に応じて使う（トレンド調査、技術の正確性確認、競合記事の把握）
